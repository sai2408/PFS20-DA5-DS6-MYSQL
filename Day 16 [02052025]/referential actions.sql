CREATE DATABASE HELLO16;
USE HELLO16;

CREATE TABLE DEPARTMENTS(
	DEPT_ID INT PRIMARY KEY,
    DEPT_NAME VARCHAR(10)
);
CREATE TABLE EMP_DETAILS(
	EMP_ID INT PRIMARY KEY,
    EMP_NAME VARCHAR(10),
    DEPT_ID INT, 
    FOREIGN KEY (DEPT_ID) REFERENCES DEPARTMENTS(DEPT_ID) ON UPDATE CASCADE
);

INSERT INTO DEPARTMENTS VALUES (101,"CSE"),(102,"ECE"),(103,"EEE");
SELECT * FROM DEPARTMENTS;


INSERT INTO EMP_DETAILS VALUE (201,"E1",101),(202,"E2",102),(203,"E3",102);
SELECT * FROM EMP_DETAILS;

SET SQL_SAFE_UPDATES = 0;

UPDATE DEPARTMENTS SET DEPT_ID = 1003 WHERE DEPT_ID = 103;
SELECT * FROM DEPARTMENTS;
SELECT * FROM EMP_DETAILS;

UPDATE DEPARTMENTS SET DEPT_ID = 1002 WHERE DEPT_ID = 102;
SELECT * FROM DEPARTMENTS;
SELECT * FROM EMP_DETAILS;


DELETE FROM DEPARTMENTS WHERE DEPT_ID = 1003;
DELETE FROM DEPARTMENTS WHERE DEPT_ID = 1002;




CREATE TABLE DEPARTMENTS1(
	DEPT_ID INT PRIMARY KEY,
    DEPT_NAME VARCHAR(10)
);
CREATE TABLE EMP_DETAILS1(
	EMP_ID INT PRIMARY KEY,
    EMP_NAME VARCHAR(10),
    DEPT_ID INT,
    FOREIGN KEY (DEPT_ID) REFERENCES DEPARTMENTS1(DEPT_ID) ON DELETE CASCADE
);

INSERT INTO DEPARTMENTS1 VALUES (101,"CSE"),(102,"ECE"),(103,"EEE");
SELECT * FROM DEPARTMENTS1;

INSERT INTO EMP_DETAILS1 VALUE (201,"E1",101),(202,"E2",102),(203,"E3",102);
SELECT * FROM EMP_DETAILS1;

DELETE FROM DEPARTMENTS1 WHERE DEPT_ID = 103;
SELECT * FROM DEPARTMENTS1;
SELECT * FROM EMP_DETAILS1;
DELETE FROM DEPARTMENTS1 WHERE DEPT_ID = 102;
SELECT * FROM EMP_DETAILS1;
SELECT * FROM DEPARTMENTS1;







CREATE TABLE BRANCH(
	BRANCH_ID INT PRIMARY KEY,
    BRANCH_NAME VARCHAR(10)
);
INSERT INTO BRANCH VALUES (1,"CSE"),(2,"ECE"),(3,"EEE"),(4,"MECH");
SELECT * FROM BRANCH;

CREATE TABLE STUDENTS(
	STUDENT_ID INT PRIMARY KEY,
    STUDENT_NAME VARCHAR(10),
    BRANCH_ID INT,
    FOREIGN KEY (BRANCH_ID) REFERENCES BRANCH(BRANCH_ID) ON DELETE SET NULL ON UPDATE SET NULL
);
INSERT INTO STUDENTS VALUES (101,"S1",1),(102,"S2",2),(103,"S3",3),(104,"S4",3);
SELECT * FROM STUDENTS;


UPDATE BRANCH SET BRANCH_ID = 1004 WHERE BRANCH_ID = 4;
SELECT * FROM BRANCH;
SELECT * FROM STUDENTS;

UPDATE BRANCH SET BRANCH_ID = 1003 WHERE BRANCH_ID = 3;
SELECT * FROM BRANCH;
SELECT * FROM STUDENTS;

DELETE FROM BRANCH WHERE BRANCH_ID = 1;
SELECT * FROM BRANCH;
SELECT * FROM STUDENTS;














CREATE TABLE BRANCH1(
	BRANCH_ID INT PRIMARY KEY,
    BRANCH_NAME VARCHAR(10)
);
INSERT INTO BRANCH1 VALUES (1,"CSE"),(2,"ECE"),(3,"EEE"),(4,"MECH");
SELECT * FROM BRANCH1;

CREATE TABLE STUDENTS1(
	STUDENT_ID INT PRIMARY KEY,
    STUDENT_NAME VARCHAR(10),
    BRANCH_ID INT,
    FOREIGN KEY (BRANCH_ID) REFERENCES BRANCH1(BRANCH_ID) ON DELETE RESTRICT ON UPDATE RESTRICT
);
INSERT INTO STUDENTS1 VALUES (101,"S1",1),(102,"S2",2),(103,"S3",3),(104,"S4",3);
SELECT * FROM STUDENTS1;

UPDATE BRANCH1 SET BRANCH_ID = 1002 WHERE BRANCH_ID = 2;
DELETE FROM BRANCH1 WHERE BRANCH_ID = 2;

